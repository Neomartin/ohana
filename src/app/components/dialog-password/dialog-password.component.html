<div class="dialog-container">
    <div fxFlex="350px">
        <h2 mat-dialog-title>
            <i class="mdi mdi-key-variant text-warning f-24"></i>
            {{ title }}
        </h2>
        <mat-dialog-content>
            <form [formGroup]="formPassword">
                <mat-form-field class="full-width">
                    <span matPrefix><i class="mdi mdi-key-remove m-r-10"></i></span>
                    <input type="password" matInput placeholder="Password actual" formControlName="oldPassword" required minlength="4">
                    <mat-error *ngIf="oldPassword.hasError('required') && (oldPassword.dirty || oldPassword.touched)" class="text-red">
                        Campo obligatorio*
                    </mat-error>
                    <mat-error *ngIf="oldPassword.hasError('minlength')">
                        La contraseña debe contener al menos 4 caractéres.
                    </mat-error>
                </mat-form-field>
                <mat-form-field class="full-width">
                    <span matPrefix><i class="mdi mdi-key-variant m-r-10"></i></span>
                    <input type="password" matInput placeholder="Nuevo Password" formControlName="newPassword" required minlength="4">
                    <mat-error *ngIf="newPassword.hasError('required') && (newPassword.dirty || newPassword.touched)" class="text-red">
                        Campo obligatorio*
                    </mat-error>
                    <mat-error *ngIf="newPassword.hasError('minlength')">
                        La contraseña debe contener al menos 4 caractéres.
                    </mat-error>
                </mat-form-field>
                <mat-form-field class="full-width">
                    <span matPrefix><i class="mdi mdi-key-variant m-r-10"></i></span>
                    <input type="password" matInput placeholder="Repita nuevo Password" formControlName="newPassword2" required minlength="4">
                    <mat-error *ngIf="newPassword2.hasError('required') && (newPassword2.dirty || newPassword2.touched)" class="text-red">
                        Campo obligatorio*
                    </mat-error>
                    <mat-error *ngIf="newPassword2.hasError('minlength')">
                        La contraseña debe contener al menos 4 caractéres.
                    </mat-error>
                </mat-form-field>
            </form>
        </mat-dialog-content>
        <div class="f-12" style="min-height: 40px">
            <div class="text-red" *ngIf="(newPassword.value !== newPassword2.value) && newPassword.valid && newPassword2.valid">
                <li>
                    La nueva contraseña no coincide.
                </li>
            </div>
            <div class="text-red" *ngIf="(newPassword.value === oldPassword.value) && newPassword.valid && oldPassword">
                <li>
                    El nuevo password debe ser distinto al anterior.
                </li>
            </div>
        </div>
        <!-- <div *ngIf="oldPassword.invalid">
            dfdf
            <pre>
                {{ oldPassword.errors | json}}
            </pre>
        </div> -->
        <mat-dialog-actions>
            <button class="btn b-green mr-auto" (click)="updPassword()"
            [disabled]="(newPassword.value !== newPassword2.value) || !formPassword.valid ||(newPassword.value === oldPassword.value)">
                Cambiar contraseña
            </button>
                    <!--  -->
            <button class="btn btn-danger" (click)="close()">Cancelar</button>
        </mat-dialog-actions>
    </div>
</div>
